# this line is only needed for bootstrapping the new VM
OLD_CONVERGE_VM=/home/ltratt/src/converge/src/vm/converge

CONVERGE_DIR=@abs_srcdir@

CONVERGE_VM_DIR=${CONVERGE_DIR}/vm
CONVERGE_VM=${CONVERGE_VM_DIR}/converge

CONVERGE_COMPILER_DIR=${CONVERGE_DIR}/compiler
CONVERGEC=${CONVERGE_COMPILER_DIR}/convergec
CONVERGEL=${CONVERGE_COMPILER_DIR}/convergel
CONVERGED=${CONVERGE_COMPILER_DIR}/converged
CONVERGE_COMPILER_LIB=${CONVERGE_COMPILER_DIR}/libcompiler.cvl

CONVERGE_LIB_DIR=${CONVERGE_DIR}/lib
CONVERGE_LIB=${CONVERGE_LIB_DIR}/libconverge.cvl


#
# C
#



#
# Converge
#

CONVERGEC_FLAGS?=

%.cvb: %.cv
	${CONVERGE_VM} ${CONVERGEC} ${CONVERGEC_FLAGS} -o $@ $<

ifdef TARGET
%.${TARGET}.cvb: %.cv
	${CONVERGE_VM} ${CONVERGEC} ${CONVERGEC_FLAGS} -T ${TARGET} -o $@ $<
endif

depend::
	${CONVERGE_VM} ${CONVERGED} -o .depend ${OBJECT_FILES}

sinclude "${.CURDIR}/.depend"
